(()=>{"use strict";class t{constructor(t){this.timespanStr=t.toLowerCase(),this._parseTimespan(),this._setTotalSeconds()}_parseTimespan(){const t=this.timespanStr.match(/(?:(?<h>\d{0,2})h)?(?:(?<m>\d{0,2})m)?(?:(?<s>\d{0,2})s)?/);this.hours=parseInt(t.groups.h)||0,this.minutes=parseInt(t.groups.m)||0,this.seconds=parseInt(t.groups.s)||0}_setTotalSeconds(){this.totalSeconds=3600*this.hours+60*this.minutes+this.seconds}getSizeInMilliSeconds(){return 1e3*this.totalSeconds}}class e{constructor(t,e){this.duration=t,this.format=e,this.mapper={d:86400,hh:3600,h:3600,mm:60,m:60,ss:1,s:1}}get(t=this.format){this.format=t;for(const[t,e]of Object.entries(this.mapper))this._formatHas(t)&&this._replace(t);return this.format}_formatHas(t){return-1!==this.format.indexOf(t)}_replace(t){let e=Math.floor(this.duration/this.mapper[t]);2===t.length&&e<10&&(e="0"+e),this.duration-=e*this.mapper[t],this.format=this.format.replace(t,e)}}class s{constructor(t){this.duration=t,this._setTargetTimestamp()}_setTargetTimestamp(){this.targetTimestamp=Date.now()+1e3*parseInt(this.duration)}getRemainingSeconds(){return(this.targetTimestamp-Date.now())/1e3}getRemainingMilliSeconds(){return this.targetTimestamp-Date.now()}getFormattedRemainingTime(t){return new e(this.getRemainingSeconds(),t).get()}}class i{constructor(e){this.timer=new s(e.getAttribute("countdown-duration")),this.tick=new t(e.getAttribute("countdown-tick-size")||"1s"),this.element=e,this.actionName=e.getAttribute("countdown-handler"),this.format=e.getAttribute("countdown-format"),this.render(),setInterval((()=>{this.timer.getRemainingSeconds()<=0?!this.actionName||window[this.actionName]():this.render()}),this.tick.getSizeInMilliSeconds())}render(){this.element.innerHTML=this.timer.getFormattedRemainingTime(this.format)}abort(){}}window.autoStartCountown=()=>{document.querySelectorAll("[autoCountdown]").forEach((t=>{new i(t)}))}})();